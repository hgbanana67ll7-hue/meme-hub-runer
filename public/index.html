<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MEME HUB RUN</title>

<style>
body{
margin:0;
overflow:hidden;
background:#0f0c29;
font-family:Arial;
color:white;
text-align:center;
}

canvas{
display:block;
margin:0 auto;
background:linear-gradient(to top,#111,#0f0c29);
}

#title{
position:absolute;
top:10px;
width:100%;
font-size:20px;
font-weight:bold;
text-shadow:0 0 10px #00ff88;
}

#score{
position:absolute;
top:40px;
width:100%;
font-size:16px;
}

#level{
position:absolute;
top:65px;
width:100%;
font-size:14px;
color:#00ff88;
}

#gameOver{
position:absolute;
top:40%;
width:100%;
display:none;
font-size:22px;
}

#credit{
position:absolute;
bottom:10px;
width:100%;
font-size:14px;
color:#00ff88;
}

#credit a{
color:#00ff88;
text-decoration:none;
font-weight:bold;
}
</style>
</head>

<body>

<div id="title">MEME HUB RUN</div>
<div id="score">Score: 0</div>
<div id="level">Level: 1</div>

<div id="gameOver">
GAME OVER<br><br>
Tap To Restart<br><br>
<a href="https://splus.ir/Memehuborginall" target="_blank" style="color:#00ff88;">
ورود به کانال Meme Hub
</a>
</div>

<canvas id="game"></canvas>

<div id="credit">
ساخته شده توسط 
<a href="https://splus.ir/Memehuborginall" target="_blank">
اسید | Meme Hub
</a>
</div>

<script>

const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = 380;

let gravity = 0.8;
let velocity = 0;
let isJumping = false;
let score = 0;
let level = 1;
let baseSpeed = 6;
let gameSpeed = baseSpeed;
let gameRunning = true;

let ground = canvas.height - 100;

let player = {
x:80,
y:ground,
width:80,
height:80
};

let obstacles = [];
let spawnTimer = 0;

// تصاویر
const playerImg = new Image();
playerImg.src = "player.png";

const obstacleImages = [];
["obs1.png","obs2.png","obs3.png","obs4.png","obs5.png"].forEach(src=>{
let img = new Image();
img.src = src;
obstacleImages.push(img);
});

function jump(){
if(!isJumping){
velocity = -18;
isJumping = true;
}
}

function spawnObstacle(){
let size = 70;
obstacles.push({
x:canvas.width,
y:ground,
width:size,
height:size,
img: obstacleImages[Math.floor(Math.random()*obstacleImages.length)]
});
}

function update(){

if(!gameRunning) return;

ctx.clearRect(0,0,canvas.width,canvas.height);

velocity += gravity;
player.y += velocity;

if(player.y >= ground){
player.y = ground;
isJumping = false;
}

ctx.drawImage(playerImg,player.x,player.y,player.width,player.height);

spawnTimer++;
if(spawnTimer > 90){
spawnObstacle();
spawnTimer = 0;
}

for(let i=0;i<obstacles.length;i++){

let obs = obstacles[i];
obs.x -= gameSpeed;

ctx.drawImage(obs.img,obs.x,obs.y,obs.width,obs.height);

let padding = 20;

if(
player.x + padding < obs.x + obs.width - padding &&
player.x + player.width - padding > obs.x + padding &&
player.y + padding < obs.y + obs.height - padding &&
player.y + player.height - padding > obs.y + padding
){
gameOver();
}

if(obs.x + obs.width < 0){
obstacles.splice(i,1);
score++;
document.getElementById("score").innerText="Score: "+score;

if(score % 20 === 0){
level++;
gameSpeed += 1;
document.getElementById("level").innerText="Level: "+level;
}
}
}

requestAnimationFrame(update);
}

function gameOver(){
gameRunning=false;
document.getElementById("gameOver").style.display="block";
}

function restart(){
score=0;
level=1;
gameSpeed=baseSpeed;
obstacles=[];
player.y=ground;
velocity=0;
spawnTimer=0;
gameRunning=true;
document.getElementById("score").innerText="Score: 0";
document.getElementById("level").innerText="Level: 1";
document.getElementById("gameOver").style.display="none";
update();
}

document.addEventListener("click",()=>{
if(!gameRunning){
restart();
}else{
jump();
}
});

document.addEventListener("touchstart",()=>{
if(!gameRunning){
restart();
}else{
jump();
}
});

update();

</script>
</body>
</html>